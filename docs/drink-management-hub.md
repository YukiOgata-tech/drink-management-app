# Alcohol Log & Event Hub（仮）- App Overview

## 1. 概要
本アプリは、**飲み会（イベント）と日常の飲酒記録を統合して管理できるモバイルアプリ**です。  
ユーザーは個人アカウントでログインし、飲み会ごとにイベント（グループ）を作成・参加して、各自のドリンク記録やメモ（酔い具合/体調）を残せます。  
イベント終了後も履歴として振り返ることができ、**自分の「適量」や「限界」傾向の把握**に活用できます。

> 本アプリは「飲酒を促進する」ためではなく、**記録・可視化・振り返り**を主目的とします（UI/設計も対決感をできるだけ抑えた方向で構築）。

---

## 2. 目的（Why）
### 2.1 ユーザー価値
- 飲み会中の「何を何杯飲んだか」を**簡単に記録**できる
- 飲み会後に「どの程度で酔った/翌日辛かった」を**振り返り**できる
- 飲み会単位でログが残るため、思い出・コミュニケーションの文脈としても使える（ただし競争/煽りは抑える）

### 2.2 プロダクト価値
- イベント×個人ログの統合により、単なる飲酒メモよりも継続利用しやすい
- プリセット（標準メニュー）＋手入力＋商品DB連携（将来）により、入力負荷を削減しながら網羅性を担保できる

---

## 3. 想定ユーザー
- 大学生〜若者を中心とした「飲み会が定期的に発生する」層
- 日常的に飲酒する人で、摂取量の把握や傾向を記録したい層

---

## 4. コアコンセプト
### 4.1 個人アカウントが主役
- 記録の所有者は常に個人（ユーザー）
- イベントは「共有できる記録空間」

### 4.2 イベント（飲み会）中心の履歴
- 飲み会を1つのイベントとして作成
- タイトル・日付・開始/終了・説明・メモ・参加者・記録ルールを含めて保存
- 後からイベント一覧として見返せる

### 4.3 記録ルール（イベントごと）
飲み会では「誤記録・改ざん・記録漏れ」が起きやすいため、イベント作成時に記録方式を選べる。

- **Self（各自入力）**：本人が自分の記録を追加
- **HostOnly（ホスト管理）**：ホスト/指定マネージャーのみが参加者の記録を操作
- **Consensus（同意制）**：記録は申請→承認で確定（承認者/条件はイベント設定に応じて運用）

---

## 5. 主な機能（Planned Features）

## 5.1 アカウント/認証
- 個人アカウント作成/ログイン
- プロフィール（表示名、アイコン等）

## 5.2 イベント（飲み会）管理
- イベント作成
  - タイトル
  - 日付・開始/終了時間（任意）
  - 説明（どんな飲み会か）
  - 記録ルール選択（Self / HostOnly / Consensus）
- イベント参加（招待/リンク/QR等：将来）
- イベント履歴（一覧、検索、詳細）

## 5.3 ドリンク記録（イベント/日常）
- ドリンク追加（プリセット選択→杯数→保存）
- 日常ログ（eventIdなし）として記録も可能
- 編集/削除（ルールに従って権限制御）
- 記録の確定状態（Consensusの場合：pending/approved/rejected）

## 5.4 プリセット（デフォルトメニュー）
- 「商品名を選択する前」でも入力できるように、アプリに標準ドリンクメニューを同梱
- カテゴリ例：
  - ビール
  - ハイボール系
  - チューハイ・サワー
  - 焼酎
  - 日本酒
  - ワイン
  - 果実酒
  - ショット・ストレート
  - カクテル（強度Lv1〜Lv5）
  - ソフトドリンク
  - その他（手入力）
- 標準値（ml/度数）を持ち、`notes`でブレ要因（店による差）を明示
- 将来：バーコード(JAN)やEC/食品DBなど外部データ連携で商品マスター拡充

## 5.5 メモ/状態記録
- イベント中/日常で「酔い具合」「体調」「翌日ダメージ」などを短文で記録
- イベント詳細画面で時系列に振り返り

## 5.6 アルコール換算（純アルコール量）
- 記録された `ml` と `ABV(%)` から **純アルコール(g)** を算出・表示
- 計算式（アプリ内ロジック）：
  - `pureAlcoholG = ml * (abv/100) * 0.789`
- プリセットは推定値として扱い、必要に応じてユーザーが上書きできる導線を用意

## 5.7（将来）飲み会向けミニゲーム
- 飲酒量に連動しない形で「場を盛り上げる」要素を追加（会話お題、価値観クイズ等）
- 「飲みゲー」を前面に出さない（設計上も直接の摂取促進に繋げない）

---

## 6. 主要画面（UI想定）
- Home
  - 今日の記録サマリ
  - 直近イベント
  - 新規イベント作成
  - 日常ログ追加
- Event Create
  - タイトル/日時/説明
  - 記録ルール選択
- Event Detail（飲み会中のメイン画面）
  - 参加者一覧
  - 追加（ドリンク/メモ）
  -（Consensus時）承認待ち一覧
- History
  - イベント履歴（カレンダー/リスト）
  - 日常ログ履歴
- Profile/Settings

---

## 7. データモデル（概念）
- User
- Event
- EventMember（role: host/manager/normal）
- DrinkLog（eventIdは任意、pending/approved等を保持）
- Memo（eventIdは任意）
- GroupRule（Self/HostOnly/Consensus）
- DefaultDrink（プリセット、カテゴリ・ml・度数・純アルコール・notes）

---

## 8. データの持ち方（リポジトリ & DB）
### 8.1 デフォルトメニュー
- `default_drinks.json` をリポジトリに同梱（seedデータ）
- 起動時に読み込み → UIで検索/選択に使用
- 必要に応じてSupabaseに同期（運用方針で選択）
  - まずは **同梱JSONでMVP** を安定させる

### 8.2 ローカル保存
- **MMKV**：高速キャッシュ（最近使ったドリンク、直近イベント、UI状態、検索インデックス等）
- **SecureStore**：セッション/トークン等の機密情報

---

## 9. 技術スタック（予定）
- React Native（Expo）
- TypeScript
- Supabase（Auth / DB / Realtimeは必要に応じて）
- ローカルストレージ：MMKV + SecureStore
- 状態管理/データ取得：必要に応じて Zustand / React Query 等

---

## 10. MVP（最小リリース）案
- アカウント
- イベント作成/参加（招待は簡易でOK）
- プリセット選択→ドリンク記録
- メモ記録
- 履歴閲覧
- 純アルコール換算表示
- 記録ルール：Self（＋できればHostOnlyまで）

---

## 11. 将来ロードマップ（例）
- Consensus（同意制）実装
- QR招待・参加者管理強化
- 店/会場（Venue）概念の導入（店メニュー再利用）
- バーコード(JAN)スキャン→商品DB照会→自前DB蓄積
- 分析ダッシュボード（傾向、翌日ダメージ相関など）
- ミニゲーム（飲酒に紐づけない）

---

## 12. 注意（設計方針）
- 店や割り方で度数/量は変動するため、本アプリの値は「推定」になり得る  
  → `notes` と上書き導線で吸収する
- グループは競争を前面に出さず、ログ共有・振り返りの体験を中心にする

